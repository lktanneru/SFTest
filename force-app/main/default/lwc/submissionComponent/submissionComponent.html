<template>

    <c-spinner is-loading={isLoading}></c-spinner>

    

    <lightning-card title="">
        <template if:true={approvalStatus}>
            <div class="slds-align_absolute-center slds-p-around_medium">Approval Status : {approvalStatus}</div>
        </template>
        
        <c-offline-banner></c-offline-banner>

        <div class="slds-grid slds-gutters slds-m-left_large">
            <!--Creating picklist for selecting 
            submitting Type, 
            Entity Name 
            and 
            Reporting Period-->


            <div class="slds-col slds-size_1-of-3 slds-m-bottom_medium"
                style="size: 40px;margin-top:12px;margin-left:20px">
                <span class="slds-badge" style="size: 40px;">Entity Name :
                    <em>{loadedFrmHomeEntityName}</em>
                </span>
            </div>


            <div class="slds-col slds-size_1-of-3 slds-m-bottom_medium slds-m-left_medium">
                <c-submission-type-combox variant="label-inline" onpass={fetchValue}
                    selectedsubtype={selectedindexsubtype}>
                </c-submission-type-combox>
            </div>


            <template if:true={isReportingPick}>
                <div class="slds-col slds-size_1-of-3 slds-m-bottom_medium">
                    <c-reporting-period-combo-box onreportperiod={fetchReportPeriod}
                        selectedreportperiod={selectedindexreportperiod}
                        ></c-reporting-period-combo-box>
                </div>
            </template>
        </div>

        <!--Creating tabsets for 
            1. submission inoformation,
            2. 10 Core Standards (Upto 20 possible) (all the components inside the CS tabs are handled 
                                      by plansSubmissionChild component)
            3. summary
            4. Submit for Approval Tabs-->
        <template if:true={isAllTabsVisible}>
            <lightning-tabset variant="scoped" active-tab-value="General">

                <!--
1. submission information 
Tab -->
                <template if:false={isApprovedRecordExist}>
                    <lightning-tab label="General" title="General" onactive={handleTabSelection} value="General">

                        <div>
                            <h1 class="slds-text-heading_medium">{labelList.OxfamDetailsOfPerson}</h1>
                            <div class="slds-grid slds-gutters">
                                <div class="slds-col slds-size_medium slds-m-around_medium">
                                    <lightning-input class="onlineSubName" label="Name" type="text"
                                        value={onlineSubName} required>
                                    </lightning-input>
                                </div>

                                <div class="slds-col slds-size_medium slds-m-around_medium">
                                    <lightning-input class="onlineSubRole" label="Role" type="text"
                                        value={onlineSubRole} required>
                                    </lightning-input>
                                </div>

                                <div class="slds-col slds-size_medium slds-m-around_medium">
                                    <lightning-input class="onlineSubEmail" label="Email" type="email"
                                        value={onlineSubEmail} required>
                                    </lightning-input>
                                </div>
                            </div>
                        </div>
                        <div class="">
                            <h1 class="slds-text-heading_medium slds-p-bottom_medium">{labelList.OxfamFocalPoints}</h1>
                            <table class="slds-table slds-table_cell-buffer slds-no-row-hover"
                                aria-label="List of Tasks">
                                <thead>
                                    <tr class="slds-line-height_reset">
                                        <th class="" scope="col">
                                            <div class="slds-truncate slds-m-left_x-small" title="Name">Name</div>
                                        </th>
                                        <th class="" scope="col">
                                            <div class="slds-truncate slds-m-left_xx-small"
                                                title="Office/sub office Name">
                                                {labelList.OxfamSubOfficeName}
                                            </div>
                                        </th>
                                        <th scope="col">
                                            <lightning-button-icon
                                                class="slds-m-left_xx-small slds-align_absolute-center"
                                                icon-name="utility:add" alternative-text="Add" title="Add"
                                                onclick={addSafeFocalPt} variant="brand">
                                            </lightning-button-icon>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <template for:each={SafeFocalPtItems} for:item="item">
                                        <tr key={item.key}>
                                            <td>
                                                
                                                <lightning-input name="entityFocalName" id={item.key}
                                                    data-key={item.key} type="text" value={item.Name}
                                                    onchange={handleSafeFocalPInputChange} required>
                                                </lightning-input>
                                            </td>
                                            <td>
                                                <lightning-input name="entityFocalOfficeName" id={item.key}
                                                    data-key={item.key} type="text" value={item.Office_Sub_Office__c}
                                                    onchange={handleSafeFocalPInputChange}>
                                                </lightning-input>
                                            </td>
                                            <td>
                                                <lightning-button-icon icon-name="utility:delete"
                                                    alternative-text="Delete"
                                                    class="slds-m-left_xx-small slds-align_absolute-center"
                                                    title="Delete" onclick={delSafeFocalPt} data-id={item.key}>
                                                </lightning-button-icon>
                                            </td>
                                        </tr>
                                    </template>
                                </tbody>
                            </table>
                        </div>
                        <div>
                            <div class="slds-bottom_medium">
                                <h1 class="slds-text-heading_medium">{labelList.OxfamInformatioProviders}</h1>
                                <br />
                                <table class="slds-table slds-table_cell-buffer slds-table_edit slds-no-row-hover"
                                    aria-label="List of Tasks">
                                    <thead>
                                        <tr class="slds-line-height_reset">
                                            <th class="" scope="col">
                                                <div class="slds-truncate slds-m-left_x-small"
                                                    title="informationProvideName">
                                                    Name</div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate slds-m-left_small" title="Role">Role</div>
                                            </th>
                                            <th class="" scope="col">
                                                <div class="slds-truncate slds-m-left_small"
                                                    title="Type of information">{labelList.OxfamTypeOfInformation}</div>
                                            </th>
                                            <th class="" scope="col">
                                                <lightning-button-icon
                                                    class="slds-m-left_small slds-align_absolute-center"
                                                    icon-name="utility:add" alternative-text="Add" title="Add"
                                                    onclick={addIP} variant="brand">
                                                </lightning-button-icon>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <template for:each={safeInformationProvider} for:item="item">
                                            <tr key={item.key}>
                                                <td>
                                                    <lightning-input name="informationProvideName" id={item.key}
                                                        data-key={item.key} type="text" value={item.Name}
                                                        onchange={handleSafeInfoProInputChange} required>
                                                    </lightning-input>
                                                </td>
                                                <td>
                                                    <lightning-input name="informationProvideRole" id={item.key}
                                                        data-key={item.key} type="text" value={item.Role__c}
                                                        onchange={handleSafeInfoProInputChange}>
                                                    </lightning-input>
                                                </td>
                                                <td>
                                                    <lightning-input name="informationProvideType" id={item.key}
                                                        data-key={item.key} type="text"
                                                        value={item.Type_Of_Information__c}
                                                        onchange={handleSafeInfoProInputChange}>
                                                    </lightning-input>
                                                </td>
                                                <td>
                                                    <lightning-button-icon icon-name="utility:delete"
                                                        alternative-text="Delete"
                                                        class="slds-m-left_xx-small slds-align_absolute-center"
                                                        title="Delete" onclick={delIP} data-id={item.key}>
                                                    </lightning-button-icon>
                                                </td>
                                            </tr>
                                        </template>
                                    </tbody>
                                </table>
                            </div><br />
                        </div><br />

                        <lightning-button class="slds-align_absolute-center" label='Continue' variant="success"
                            onclick={OnSumbitInf}></lightning-button>
                    </lightning-tab>


                    <!-- CORE STANDARDS  -->
                    <!-- Tab 1 - 20 -->
                    <template if:true={tab1}>
                        <lightning-tab label={tab1.Name} value={tab1.Id} onactive={handleActive}>
                            <template if:true={ischangedtab1}>
                            <c-plans-submission-child selectedtabname={tab1.Name} selectedtabvalue={tab1.Id}
                                implementflag={implementFlag} mancorestd={manCoreStd} retrivedanswer={retrivedAnswer}
                                taskreclist1={taskRecList1} submissionid={onlineSubmissionId}
                                reportperiodid={reportPeriodId} entityname={entityId} traininglist={trainingList}
                                partnerlist={partnerList} projectlist={projectList} onunsavedtaskchange={handleUnsavedTasks}
                                onunsavedanswerchange={handleUnsavedAnswers} onunsavedpartnerchange={handleUnsavedPartner}
                                onunsavedtrainingchange={handleUnsavedTraining} onunsavedprojectchange={handleUnsavedProject}
                                 ontaskrecaddiion={handleTaskAddition} taskbackuplist={taskBackupList}>
                            </c-plans-submission-child>
                            </template>
                        </lightning-tab>
                    </template>


                    <template if:true={tab2}>
                        <lightning-tab label={tab2.Name} value={tab2.Id} onactive={handleActive}>
                            <template if:true={ischangedtab2}>
                            <c-plans-submission-child  class="cs1ChildTab" selectedtabname={tab2.Name} selectedtabvalue={tab2.Id}
                                implementflag={implementFlag} mancorestd={manCoreStd} retrivedanswer={retrivedAnswer}
                                submissionid={onlineSubmissionId} reportperiodid={reportPeriodId} entityname={entityId}
                                taskreclist1={taskRecList1} traininglist={trainingList} partnerlist={partnerList}
                                projectlist={projectList} onunsavedtaskchange={handleUnsavedTasks}
                                onunsavedanswerchange={handleUnsavedAnswers} onunsavedpartnerchange={handleUnsavedPartner}
                                onunsavedtrainingchange={handleUnsavedTraining} onunsavedprojectchange={handleUnsavedProject}
                                 ontaskrecaddiion={handleTaskAddition} taskbackuplist={taskBackupList}>
                            </c-plans-submission-child>
                            </template>
                        </lightning-tab>
                    </template>

                    <template if:true={tab3}>
                        <lightning-tab label={tab3.Name} value={tab3.Id} onactive={handleActive}>
                            <template if:true={ischangedtab3}>
                            <c-plans-submission-child selectedtabname={tab3.Name} selectedtabvalue={tab3.Id}
                                implementflag={implementFlag} mancorestd={manCoreStd} retrivedanswer={retrivedAnswer}
                                submissionid={onlineSubmissionId} reportperiodid={reportPeriodId} entityname={entityId}
                                taskreclist1={taskRecList1} traininglist={trainingList} partnerlist={partnerList}
                                projectlist={projectList} onunsavedtaskchange={handleUnsavedTasks}
                                onunsavedanswerchange={handleUnsavedAnswers} onunsavedpartnerchange={handleUnsavedPartner}
                                onunsavedtrainingchange={handleUnsavedTraining} onunsavedprojectchange={handleUnsavedProject}
                                 ontaskrecaddiion={handleTaskAddition} taskbackuplist={taskBackupList}>
                            </c-plans-submission-child>
                            </template>
                        </lightning-tab>
                    </template>

                    <template if:true={tab4}>
                        <lightning-tab label={tab4.Name} value={tab4.Id} onactive={handleActive}>
                            <template if:true={ischangedtab4}>
                            <c-plans-submission-child selectedtabname={tab4.Name} selectedtabvalue={tab4.Id}
                                implementflag={implementFlag} mancorestd={manCoreStd} retrivedanswer={retrivedAnswer}
                                submissionid={onlineSubmissionId} reportperiodid={reportPeriodId} entityname={entityId}
                                taskreclist1={taskRecList1} traininglist={trainingList} partnerlist={partnerList}
                                projectlist={projectList} onunsavedtaskchange={handleUnsavedTasks}
                                onunsavedanswerchange={handleUnsavedAnswers} onunsavedpartnerchange={handleUnsavedPartner}
                                onunsavedtrainingchange={handleUnsavedTraining} onunsavedprojectchange={handleUnsavedProject}
                                 ontaskrecaddiion={handleTaskAddition} taskbackuplist={taskBackupList}>
                            </c-plans-submission-child>
                            </template>
                        </lightning-tab>
                    </template>

                    <template if:true={tab5}>
                        <lightning-tab label={tab5.Name} value={tab5.Id} onactive={handleActive}>
              <!---<lightning-button variant="base" label="click" title="click" onclick={handlechild}>

                      </lightning-button>--->
                            <!--<lightning-card  variant="Narrow"  title="Hello" icon-name="standard:account">
                                <template for:each={trainingList} for:item="item">
                                    <lightning-textarea name="TrainingDesc" key={item.key}
                                                                            type="text" id={item.key}
                                                                            label="Description of training"
                                                                            onchange={handletrainingonchange}
                                                                            value={item.Description_Of_Training__c}>
                                                                        </lightning-textarea>
                                </template>
                            </lightning-card>-->
                            <template if:true={ischangedtab5}>
                            <c-plans-submission-child selectedtabname={tab5.Name} selectedtabvalue={tab5.Id}
                                implementflag={implementFlag} mancorestd={manCoreStd} retrivedanswer={retrivedAnswer}
                                submissionid={onlineSubmissionId} reportperiodid={reportPeriodId} entityname={entityId}
                                taskreclist1={taskRecList1} traininglist={trainingList} partnerlist={partnerList}
                                projectlist={projectList} onunsavedtaskchange={handleUnsavedTasks} taskbackuplist={taskBackupList}
                                onunsavedanswerchange={handleUnsavedAnswers} onunsavedpartnerchange={handleUnsavedPartner}
                                onunsavedtrainingchange={handleUnsavedTraining} onunsavedprojectchange={handleUnsavedProject}
                                 ontaskrecaddiion={handleTaskAddition} >
                            </c-plans-submission-child> 
                            </template>
                        </lightning-tab>
                    </template>

                    <template if:true={tab6}>
                        <lightning-tab label={tab6.Name} value={tab6.Id} onactive={handleActive}>
                            <template if:true={ischangedtab6}>
                            <c-plans-submission-child selectedtabname={tab6.Name} selectedtabvalue={tab6.Id}
                                implementflag={implementFlag} mancorestd={manCoreStd} retrivedanswer={retrivedAnswer}
                                submissionid={onlineSubmissionId} reportperiodid={reportPeriodId} entityname={entityId}
                                taskreclist1={taskRecList1} traininglist={trainingList} partnerlist={partnerList}
                                projectlist={projectList} onunsavedtaskchange={handleUnsavedTasks} taskbackuplist={taskBackupList}
                                onunsavedanswerchange={handleUnsavedAnswers} onunsavedpartnerchange={handleUnsavedPartner}
                                onunsavedtrainingchange={handleUnsavedTraining} onunsavedprojectchange={handleUnsavedProject}
                                 ontaskrecaddiion={handleTaskAddition} >
                            </c-plans-submission-child>
                            </template>
                        </lightning-tab>
                    </template>

                    <template if:true={tab7}>
                        <lightning-tab label={tab7.Name} value={tab7.Id} onactive={handleActive}>
                            <template if:true={ischangedtab7}>
                            <c-plans-submission-child selectedtabname={tab7.Name} selectedtabvalue={tab7.Id}
                                implementflag={implementFlag} mancorestd={manCoreStd} retrivedanswer={retrivedAnswer}
                                submissionid={onlineSubmissionId} reportperiodid={reportPeriodId} entityname={entityId}
                                taskreclist1={taskRecList1} traininglist={trainingList} partnerlist={partnerList}
                                projectlist={projectList} onunsavedtaskchange={handleUnsavedTasks} taskbackuplist={taskBackupList}
                                onunsavedanswerchange={handleUnsavedAnswers} onunsavedpartnerchange={handleUnsavedPartner}
                                onunsavedtrainingchange={handleUnsavedTraining} onunsavedprojectchange={handleUnsavedProject}
                                 ontaskrecaddiion={handleTaskAddition} >
                            </c-plans-submission-child>
                            </template>
                        </lightning-tab>
                    </template>

                    <template if:true={tab8}>
                        <lightning-tab label={tab8.Name} value={tab8.Id} onactive={handleActive}>
                            <template if:true={ischangedtab8}>
                            <c-plans-submission-child selectedtabname={tab8.Name} selectedtabvalue={tab8.Id}
                                implementflag={implementFlag} mancorestd={manCoreStd} retrivedanswer={retrivedAnswer}
                                submissionid={onlineSubmissionId} reportperiodid={reportPeriodId} entityname={entityId}
                                taskreclist1={taskRecList1} traininglist={trainingList} partnerlist={partnerList}
                                projectlist={projectList} onunsavedtaskchange={handleUnsavedTasks} taskbackuplist={taskBackupList}
                                onunsavedanswerchange={handleUnsavedAnswers} onunsavedpartnerchange={handleUnsavedPartner}
                                onunsavedtrainingchange={handleUnsavedTraining} onunsavedprojectchange={handleUnsavedProject}
                                 ontaskrecaddiion={handleTaskAddition} >
                            </c-plans-submission-child>
                            </template>
                        </lightning-tab>
                    </template>


                    <template if:true={tab9}>
                        <lightning-tab label={tab9.Name} value={tab9.Id} onactive={handleActive}>
                            <template if:true={ischangedtab9}>
                            <c-plans-submission-child selectedtabname={tab9.Name} selectedtabvalue={tab9.Id}
                                implementflag={implementFlag} mancorestd={manCoreStd} retrivedanswer={retrivedAnswer}
                                submissionid={onlineSubmissionId} reportperiodid={reportPeriodId} entityname={entityId}
                                taskreclist1={taskRecList1} traininglist={trainingList} partnerlist={partnerList}
                                projectlist={projectList} onunsavedtaskchange={handleUnsavedTasks} taskbackuplist={taskBackupList}
                                onunsavedanswerchange={handleUnsavedAnswers} onunsavedpartnerchange={handleUnsavedPartner}
                                onunsavedtrainingchange={handleUnsavedTraining} onunsavedprojectchange={handleUnsavedProject}
                                 ontaskrecaddiion={handleTaskAddition} >
                            </c-plans-submission-child>
                            </template>
                        </lightning-tab>
                    </template>


                    <template if:true={tab10}>
                        <lightning-tab label={tab10.Name} value={tab10.Id} onactive={handleActive}>
                            <template if:true={ischangedtab10}>
                            <c-plans-submission-child selectedtabname={tab10.Name} selectedtabvalue={tab10.Id}
                                implementflag={implementFlag} mancorestd={manCoreStd} retrivedanswer={retrivedAnswer}
                                submissionid={onlineSubmissionId} reportperiodid={reportPeriodId} entityname={entityId}
                                taskreclist1={taskRecList1} traininglist={trainingList} partnerlist={partnerList}
                                projectlist={projectList} onunsavedtaskchange={handleUnsavedTasks} taskbackuplist={taskBackupList}
                                onunsavedanswerchange={handleUnsavedAnswers} onunsavedpartnerchange={handleUnsavedPartner}
                                onunsavedtrainingchange={handleUnsavedTraining} onunsavedprojectchange={handleUnsavedProject}
                                 ontaskrecaddiion={handleTaskAddition}>
                            </c-plans-submission-child>
                            </template>
                        </lightning-tab>
                    </template>



                    <template if:true={showCoreStandard11}>
                        <lightning-tab label={tab11.Name} value={tab11.Id} onactive={handleActive}>
                            
                            <c-plans-submission-child selectedtabname={tab11.Name} selectedtabvalue={tab11.Id}
                                implementflag={implementFlag} mancorestd={manCoreStd} retrivedanswer={retrivedAnswer}
                                submissionid={onlineSubmissionId} reportperiodid={reportPeriodId} taskbackuplist={taskBackupList}
                                entityname={entityName} taskreclist1={taskRecList1} traininglist={trainingList}
                                partnerlist={partnerList} projectlist={projectList} onunsavedtaskchange={handleUnsavedTasks}
                                onunsavedanswerchange={handleUnsavedAnswers} onunsavedpartnerchange={handleUnsavedPartner}
                                onunsavedtrainingchange={handleUnsavedTraining} onunsavedprojectchange={handleUnsavedProject}
                                 ontaskrecaddiion={handleTaskAddition}>
                            </c-plans-submission-child>
                        
                        </lightning-tab>
                    </template>


                    <template if:true={showCoreStandard12}>
                        <lightning-tab label={tab12.Name} value={tab12.Id} onactive={handleActive}>
                            
                            <c-plans-submission-child selectedtabname={tab12.Name} selectedtabvalue={tab12.Id}
                                implementflag={implementFlag} mancorestd={manCoreStd} retrivedanswer={retrivedAnswer}
                                submissionid={onlineSubmissionId} reportperiodid={reportPeriodId} taskbackuplist={taskBackupList}
                                entityname={entityName} taskreclist1={taskRecList1} traininglist={trainingList}
                                partnerlist={partnerList} projectlist={projectList} onunsavedtaskchange={handleUnsavedTasks}
                                onunsavedanswerchange={handleUnsavedAnswers} onunsavedpartnerchange={handleUnsavedPartner}
                                onunsavedtrainingchange={handleUnsavedTraining} onunsavedprojectchange={handleUnsavedProject}
                                 ontaskrecaddiion={handleTaskAddition}>
                            </c-plans-submission-child>
                            
                        </lightning-tab>
                    </template>


                    <template if:true={showCoreStandard13}>
                        <lightning-tab label={tab13.Name} value={tab13.Id} onactive={handleActive}>
                            
                            <c-plans-submission-child selectedtabname={tab13.Name} selectedtabvalue={tab13.Id}
                                implementflag={implementFlag} mancorestd={manCoreStd} retrivedanswer={retrivedAnswer}
                                submissionid={onlineSubmissionId} reportperiodid={reportPeriodId} taskbackuplist={taskBackupList}
                                entityname={entityName} taskreclist1={taskRecList1} traininglist={trainingList}
                                partnerlist={partnerList} projectlist={projectList} onunsavedtaskchange={handleUnsavedTasks}
                                onunsavedanswerchange={handleUnsavedAnswers} onunsavedpartnerchange={handleUnsavedPartner}
                                onunsavedtrainingchange={handleUnsavedTraining} onunsavedprojectchange={handleUnsavedProject}
                                 ontaskrecaddiion={handleTaskAddition}>
                            </c-plans-submission-child>
                            
                        </lightning-tab>
                    </template>


                    <template if:true={showCoreStandard14}>
                        <lightning-tab label={tab14.Name} value={tab14.Id} onactive={handleActive}>
                            
                            <c-plans-submission-child selectedtabname={tab14.Name} selectedtabvalue={tab14.Id}
                                implementflag={implementFlag} mancorestd={manCoreStd} retrivedanswer={retrivedAnswer}
                                submissionid={onlineSubmissionId} reportperiodid={reportPeriodId} taskbackuplist={taskBackupList}
                                entityname={entityName} taskreclist1={taskRecList1} traininglist={trainingList}
                                partnerlist={partnerList} projectlist={projectList} onunsavedtaskchange={handleUnsavedTasks}
                                onunsavedanswerchange={handleUnsavedAnswers} onunsavedpartnerchange={handleUnsavedPartner}
                                onunsavedtrainingchange={handleUnsavedTraining} onunsavedprojectchange={handleUnsavedProject}
                                 ontaskrecaddiion={handleTaskAddition}>
                            </c-plans-submission-child>
                        </lightning-tab>
                    </template>


                    <template if:true={showCoreStandard15}>
                        <lightning-tab label={tab15.Name} value={tab15.Id} onactive={handleActive}>
                            <c-plans-submission-child selectedtabname={tab15.Name} selectedtabvalue={tab15.Id}
                                implementflag={implementFlag} mancorestd={manCoreStd} retrivedanswer={retrivedAnswer}
                                submissionid={onlineSubmissionId} reportperiodid={reportPeriodId} taskbackuplist={taskBackupList}
                                entityname={entityName} taskreclist1={taskRecList1} traininglist={trainingList}
                                partnerlist={partnerList} projectlist={projectList} onunsavedtaskchange={handleUnsavedTasks}
                                onunsavedanswerchange={handleUnsavedAnswers} onunsavedpartnerchange={handleUnsavedPartner}
                                onunsavedtrainingchange={handleUnsavedTraining} onunsavedprojectchange={handleUnsavedProject}
                                 ontaskrecaddiion={handleTaskAddition}>
                            </c-plans-submission-child>
                        </lightning-tab>
                    </template>


                    <template if:true={showCoreStandard16}>
                        <lightning-tab label={tab16.Name} value={tab16.Id} onactive={handleActive}>
                            <c-plans-submission-child selectedtabname={tab16.Name} selectedtabvalue={tab16.Id}
                                implementflag={implementFlag} mancorestd={manCoreStd} retrivedanswer={retrivedAnswer}
                                submissionid={onlineSubmissionId} reportperiodid={reportPeriodId} taskbackuplist={taskBackupList}
                                entityname={entityName} taskreclist1={taskRecList1} traininglist={trainingList}
                                partnerlist={partnerList} projectlist={projectList} onunsavedtaskchange={handleUnsavedTasks}
                                onunsavedanswerchange={handleUnsavedAnswers} onunsavedpartnerchange={handleUnsavedPartner}
                                onunsavedtrainingchange={handleUnsavedTraining} onunsavedprojectchange={handleUnsavedProject}
                                 ontaskrecaddiion={handleTaskAddition} >
                            </c-plans-submission-child>
                        </lightning-tab>
                    </template>


                    <template if:true={showCoreStandard17}>
                        <lightning-tab label={tab17.Name} value={tab17.Id} onactive={handleActive}>
                            <c-plans-submission-child selectedtabname={tab17.Name} selectedtabvalue={tab17.Id}
                                implementflag={implementFlag} mancorestd={manCoreStd} retrivedanswer={retrivedAnswer}
                                submissionid={onlineSubmissionId} reportperiodid={reportPeriodId} taskbackuplist={taskBackupList}
                                entityname={entityName} taskreclist1={taskRecList1} traininglist={trainingList}
                                partnerlist={partnerList} projectlist={projectList} onunsavedtaskchange={handleUnsavedTasks}
                                onunsavedanswerchange={handleUnsavedAnswers} onunsavedpartnerchange={handleUnsavedPartner}
                                onunsavedtrainingchange={handleUnsavedTraining} onunsavedprojectchange={handleUnsavedProject}
                                 ontaskrecaddiion={handleTaskAddition} >
                            </c-plans-submission-child>
                        </lightning-tab>
                    </template>


                    <template if:true={showCoreStandard18}>
                        <lightning-tab label={tab18.Name} value={tab18.Id} onactive={handleActive}>
                            <c-plans-submission-child selectedtabname={tab18.Name} selectedtabvalue={tab18.Id}
                                implementflag={implementFlag} mancorestd={manCoreStd} retrivedanswer={retrivedAnswer}
                                submissionid={onlineSubmissionId} reportperiodid={reportPeriodId} taskbackuplist={taskBackupList}
                                entityname={entityName} taskreclist1={taskRecList1} traininglist={trainingList}
                                partnerlist={partnerList} projectlist={projectList} onunsavedtaskchange={handleUnsavedTasks}
                                onunsavedanswerchange={handleUnsavedAnswers} onunsavedpartnerchange={handleUnsavedPartner}
                                onunsavedtrainingchange={handleUnsavedTraining} onunsavedprojectchange={handleUnsavedProject}
                                 ontaskrecaddiion={handleTaskAddition} >
                            </c-plans-submission-child>
                        </lightning-tab>
                    </template>


                    <template if:true={showCoreStandard19}>
                        <lightning-tab label={tab19.Name} value={tab19.Id} onactive={handleActive}>
                            <c-plans-submission-child selectedtabname={tab19.Name} selectedtabvalue={tab19.Id}
                                implementflag={implementFlag} mancorestd={manCoreStd} retrivedanswer={retrivedAnswer}
                                submissionid={onlineSubmissionId} reportperiodid={reportPeriodId} taskbackuplist={taskBackupList}
                                entityname={entityName} taskreclist1={taskRecList1} traininglist={trainingList}
                                partnerlist={partnerList} projectlist={projectList} onunsavedtaskchange={handleUnsavedTasks}
                                onunsavedanswerchange={handleUnsavedAnswers} onunsavedpartnerchange={handleUnsavedPartner}
                                onunsavedtrainingchange={handleUnsavedTraining} onunsavedprojectchange={handleUnsavedProject}
                                 ontaskrecaddiion={handleTaskAddition} >
                            </c-plans-submission-child>
                        </lightning-tab>
                    </template>


                    <template if:true={showCoreStandard20}>
                        <lightning-tab label={tab20.Name} value={tab20.Id} onactive={handleActive}>
                            <c-plans-submission-child selectedtabname={tab20.Name} selectedtabvalue={tab20.Id}
                                implementflag={implementFlag} mancorestd={manCoreStd} retrivedanswer={retrivedAnswer}
                                submissionid={onlineSubmissionId} reportperiodid={reportPeriodId} taskbackuplist={taskBackupList}
                                entityname={entityName} taskreclist1={taskRecList1} traininglist={trainingList}
                                partnerlist={partnerList} projectlist={projectList} onunsavedtaskchange={handleUnsavedTasks}
                                onunsavedanswerchange={handleUnsavedAnswers} onunsavedpartnerchange={handleUnsavedPartner}
                                onunsavedtrainingchange={handleUnsavedTraining} onunsavedprojectchange={handleUnsavedProject}
                                 ontaskrecaddiion={handleTaskAddition} >
                            </c-plans-submission-child>
                        </lightning-tab>
                    </template>

                    <!-- 3. summary Tab    -->

                    <template if:true={implementFlag}>
                        <lightning-tab label="Summary" onactive={handleTabSelection}>
                            <div class="slds-m-left_large">

                                <template if:true={summaryList}>

                                    <!-- <p class="slds-text-heading_medium slds-m-top_medium"> Summary </p> -->

                                    <!-- <p style="color:blue" class="slds-m-around_medium">Please summarise the key
                                        achievements in implementing One Oxfam CS and PSEA policies and Safeguarding
                                        Core Standards for this reporting year {reportPeriodName}</p> -->
                                    <div class="slds-size_xx-large">
                                        <lightning-textarea class="SummaryAchievements"
                                            value={summaryList.Summary_Achievements__c}
                                            label="Please summarise the key achievements in implementing One Oxfam CS and PSEA policies and Safeguarding Core Standards for this reporting period"></lightning-textarea>

                                        <lightning-textarea class="SummaryChallanges"
                                            value={summaryList.Sumamry_Challanges__c}
                                            label="What are the key challenges you experienced in implementing these during this reporting period?"></lightning-textarea>

                                        <lightning-textarea class="SummarySupportNeeded"
                                            value={summaryList.Summary_Support_Needed__c}
                                            label="What further support do you need from your EA for effective implementation of One Oxfam CS and PSEA Policies and Safeguarding Core Standards?"></lightning-textarea>
                                    </div>

                                </template>
                            </div>
                            <lightning-button class="slds-align_absolute-center slds-m-around_medium" variant="success"
                                label="Save" onclick={handleOnSaveSummary}></lightning-button>
                        </lightning-tab>
                    </template>
                    <!-- 4. Submit For approval Tab -->
                    <lightning-tab label="Submit For Approval" onactive={handleTabSelection}>
                        <lightning-accordion active-section-name={activeSectionsInApprovalTab}
                            allow-multiple-sections-open>
                            <template if:true={implementFlag}>
                                <lightning-accordion-section name="Evidence CheckList" label="Evidence CheckList">
                                    <div class="slds-m-left_large">
                                        <template if:true={summaryList}>
                                            <!-- <p class="slds-text-heading_medium slds-m-bottom_medium"> Evidence CheckList</p> -->
                                            <lightning-input checked={summaryList.CS4_Interview_Template__c}
                                                label="CS 4 Interview Template" type="checkbox"
                                                data-id="checkbox"></lightning-input>

                                            <lightning-input checked={summaryList.CS4_Reference_Check_Template__c}
                                                label="CS 4 Reference Check Template" type="checkbox"
                                                data-id="checkbox"></lightning-input>

                                            <lightning-input checked={summaryList.CS5_Training_Records__c}
                                                label="CS 5 Training Records(attendance sheet, agenda / training materials, report etc) for all trainings delivered in reporting period"
                                                type="checkbox" data-id="checkbox"></lightning-input>

                                            <lightning-input
                                                checked={summaryList.CS6_Safeguarding_Reporting_Procedure__c}
                                                label="CS 6 Safeguarding reporting procedure (including mapping of in-country survivor support services) "
                                                type="checkbox" data-id="checkbox"></lightning-input>

                                            <lightning-input
                                                checked={summaryList.CS7_Examples_of_community_level_feedback__c}
                                                label="CS 7 Examples of community level feedback and complaints mechanisms (communication materials, stakeholder consultations etc)"
                                                type="checkbox" data-id="checkbox"></lightning-input>

                                            <lightning-input
                                                checked={summaryList.CS8_Sample_Partner_Capacity_Assessment__c}
                                                label="CS 8 Sample Partner Capacity Assessment (PCA)" type="checkbox"
                                                data-id="checkbox"></lightning-input>

                                            <lightning-input
                                                checked={summaryList.CS8_Sample_Partner_Working_Agreement__c}
                                                label="CS 8 Sample Partner Working Agreement (PWA)" type="checkbox"
                                                data-id="checkbox"></lightning-input>
                                                
                                            <lightning-input
                                                checked={summaryList.CS10_Informed_Consent_Template__c}
                                                label="CS10 - Informed Consent Template" type="checkbox"
                                                data-id="checkbox"></lightning-input>


                                            <lightning-button class="slds-align_absolute-center slds-m-around_medium"
                                                variant="success" label="Save"
                                                onclick={handleOnSaveEvidence}></lightning-button>
                                        </template>
                                    </div>
                                </lightning-accordion-section>

                                <lightning-accordion-section name="Evidence" label="Evidence">
                                    <c-all-evidences submission-id={onlineSubmissionId}></c-all-evidences>
                                </lightning-accordion-section>

                <!-- progress bar -->
                                <lightning-accordion-section name="Progress Bar"
                                    label="Indicator of Compliance with this Core Standard's Minimum Standards">
                                    <template for:each={progressBarList} for:item="item">
                                        <p key={item}>Progress Bar Of {item.tabName}</p>
                                        <br key={item} />
                                        <lightning-progress-bar value={item.progressVal} size="large" key={item}
                                            variant="circular"></lightning-progress-bar><br key={item} />
                                    </template>
                                </lightning-accordion-section>
    
                            </template>

                            <!-- Instructions             -->
                            <lightning-accordion-section name="Instructions" label="Final Instructions">

                                <p class="slds-m-around_medium"><b>BEFORE SUBMITTING FOR APPROVAL</b><br /><br />

                                    Do not submit for approval until all reviews have been completed and the Plan or
                                    Report is finalised – once Plans and Reports are submitted for approval and
                                    approved, they can no longer be updated or edited. Use the Comments functionality to
                                    conduct reviews of the Plan or Report prior to submitting for final approval

                                    <br /><br />Before you submit for approval, please make sure you are the submission
                                    owner - i.e. the person listed in the “Person Submitting this Plan or Report”
                                    section in the General tab. Only the submission owner will be notified once the
                                    approver approves or rejects the Plan or Report.<br/><br/>

                                    <b>Submit Button Description</b><br/><br/>

                                    <b>Note:</b> The button below changes depending on where the Plan or Report is in the approval process:
                                     
                                    <br/><br/><b style="color:blue">Submit for Approval:</b>  Means the Plan or Report is not yet submitted for approval.  CLICK to submit for approval.
                                     
                                     <br/><br/><b style="color:grey">For Approval (Button is disable) :</b>  Means the Plan or Report has already been submitted for approval, and it is with the approver to look at. The Plan or Report can still be updated while the approver is looking at it --- If you wish to update the Plan or Report just save the changes in the Core Standard tab, and your changes will be visible to the Approver. You do not need to re-submit the Plan or Report.  However once the approver approves the Plan or Report, it can no longer be updated.  
                                     
                                     <br/><br/><b style="color:green">Review and Resubmit:</b> The Plan or Report has been rejected by the approver and send back for further edits and updates.  Click Review and Resubmit once you have the necessary updates and want to re-submit for approval. 

                                </p>

                                

                                
                            </lightning-accordion-section>
                        </lightning-accordion>
                        <div class="slds-p-around_medium">
                            <lightning-textarea class="submissionComment" value={submissionComment} label="Comments"
                                placeholder="Make your comments to the approver here">
                            </lightning-textarea>
                        </div>

                        <lightning-button class="slds-align_absolute-center slds-m-around_medium" variant="success"
                            label={submitLabel} onclick={submitAndApproval}
                            disabled={isSubmitDisabled}></lightning-button>

                        <template if:true={showSuccessMessage}>
                            <p class="slds-align_absolute-center">Submitted Successfully</p>
                        </template>

                    </lightning-tab>
                </template>

            </lightning-tabset>
            
                <template if:true={coreStdSelected}>
                    <div>
                        <c-submission-child-component get-entity-name={entityName} get-report-year={reportPeriodName}
                            get-tab={selectedtabname} get-online-sub-id={onlineSubmissionId}
                            get-core-std-entity={corestdentityid}>
                        </c-submission-child-component>
                    </div>
                </template>

           
        </template>
    </lightning-card>
</template>