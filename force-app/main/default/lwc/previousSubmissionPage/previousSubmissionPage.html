<template>
    

    <div class="container">
        <lightning-card title="">
            <c-offline-banner></c-offline-banner>
            <div class="slds-form-element slds-grid slds-gutters slds-m-around_medium">

                <div class="slds-col slds-m-left_large">
                    <c-entity-type-combo-box onentity={fetchEntityValue} selectedentity={entityName}>
                    </c-entity-type-combo-box>
                </div>

                <div class="slds-col ">

                    <c-submission-type-combox variant="label-inline" onpass={fetchValue}
                        selectedsubtype={submissionType}> 
                    </c-submission-type-combox>
                </div>

                <div class="slds-col">
                    <c-reporting-period-combo-box onreportperiod={fetchReportPeriod}
                        selectedreportperiod={reportPeriodName}>
                    </c-reporting-period-combo-box>
                </div>
                
            </div>
            <lightning-accordion active-section-name="Display" allow-multiple-sections-open>
                <template if:true={displayHyperLink}>
                    <lightning-accordion-section name="Display" label="This is the approved Plan or Report.  Click on name of the Plan or Report below  to view the contents">
                    <a class="slds-align_absolute-center slds-m-around_medium" onclick={handleSubmissionNameClick}>{submissionName}</a>
                    </lightning-accordion-section>
                </template>   


            <template if:true={displayTabs}> 
                <lightning-accordion-section name="Details of person who submitted the plan/Report" label="Details of person who submitted the plan/Report">
                    <div class="table-alignment slds-table_striped slds-table_col-bordered  slds-is-relative slds-no-row-hover slds-cell-wrap slds-table_resizable-cols">
                                <template if:true={onlineSubmissionArray}>
                                    <lightning-datatable 
                                                        data={onlineSubmissionArray} 
                                                        columns={completedPersonColumns} 
                                                        key-field="Id" 
                                                        hide-checkbox-column="true"
                                                        min-column-width="150"
                                                        wrap-text-max-lines="40">
                                    </lightning-datatable>
                                </template>
                            </div>              
                </lightning-accordion-section>



                    <lightning-accordion-section name="Safeguarding Focal Points" label="Safeguarding Focal Points"
                        onclick={getSafePoints}>
                        <div class="table-alignment slds-table_striped slds-table_col-bordered  slds-is-relative slds-no-row-hover slds-cell-wrap slds-table_resizable-cols">
                            <template if:true={approversDisplayList1}>
                                <lightning-datatable 
                                                    data={approversDisplayList1} 
                                                    columns={cols1} 
                                                    key-field="Id"
                                                    hide-checkbox-column="true" 
                                                    show-row-number-column
                                                    min-column-width="150">
                                </lightning-datatable>
                                <div class="slds-align_absolute-center">
                                    <lightning-button class="slds-m-top_small" label="Download Focal Points - CSV"
                                        onclick={handleFocalGenerator}>
                                    </lightning-button>
                                </div>
                            </template>
                        </div>
                    </lightning-accordion-section>

                    <lightning-accordion-section name="Information Providers" label="Information Providers"
                        onclick={getInfProv}>
                        <div class="table-alignment slds-table_striped slds-table_col-bordered  slds-is-relative slds-no-row-hover slds-cell-wrap slds-table_resizable-cols">
                            <template if:true={approversDisplayList2}>
                                <lightning-datatable 
                                                    data={approversDisplayList2} 
                                                    columns={cols2} 
                                                    key-field="Id"
                                                    hide-checkbox-column="true" 
                                                    show-row-number-column
                                                    min-column-width="150">
                                </lightning-datatable>
                                <div class="slds-align_absolute-center">
                                    <lightning-button class="slds-m-top_small" label="Download Focal Points - CSV"
                                        onclick={handleInformationGenerator}>
                                    </lightning-button>
                                </div>
                            </template>
                        </div>
                    </lightning-accordion-section>

                    <lightning-accordion-section name="Tasks" label="Tasks" onclick={getTask}>
                        <div class="table-alignment slds-table_striped slds-table_col-bordered  slds-is-relative slds-no-row-hover slds-cell-wrap slds-table_resizable-cols">
                                    <template if:true={approversDisplayList}>
                                        <lightning-datatable 
                                                            data={approversDisplayList} 
                                                            columns={cols} 
                                                            key-field="Id"
                                                            sorted-by={sortBy} 
                                                            sorted-direction={sortDirection} 
                                                            onsort={doSorting}
                                                            hide-checkbox-column="true" 
                                                            show-row-number-column
                                                            min-column-width="150"
                                                            wrap-text-max-lines="10">
                                        </lightning-datatable>
                                        <div class="slds-align_absolute-center">
                                            <lightning-button class="slds-m-top_small" label="Download Tasks - CSV"
                                                onclick={handleTasksGenerator}>
                                            </lightning-button>
                                        </div>
                                    </template>
                                </div>
                    </lightning-accordion-section>

                    <template if:true={isImplPlan}>
                        <lightning-accordion-section name="QuestionsAnswers" label="Questions and Answers">
                            <div class="table-alignment slds-table_striped slds-table_col-bordered  slds-is-relative slds-no-row-hover slds-cell-wrap slds-table_resizable-cols">
                                <lightning-tabset>
                                    <template for:each={coreStandards} for:item="coreStandard">
                                        <lightning-tab key={coreStandard.value} label={coreStandard.label} value={coreStandard.value} onactive={getQnA}>
                                            <lightning-datatable 
                                                                data={approversDisplayList3} 
                                                                columns={columns}
                                                                key-field="QuestionNumber" 
                                                                hide-checkbox-column="true" 
                                                                wrap-text-max-lines="3">
                                            </lightning-datatable>
                                        </lightning-tab>
                                    </template>
                                </lightning-tabset>
                            </div>
                            <div class="slds-align_absolute-center">
                                    <lightning-button class="slds-m-top_small" label="Download QnA - CSV"
                                        onclick={handleQnAGenerator}>
                                    </lightning-button>
                                </div>
                        </lightning-accordion-section>

                        <lightning-accordion-section name="Safeguarding Training Table (CS5)"
                            label="Safeguarding Training Table (CS5)" onclick={getTrainEvd}>
                            <div class="table-alignment slds-table_striped slds-table_col-bordered  slds-is-relative slds-no-row-hover slds-cell-wrap slds-table_resizable-cols">
                                <template if:true={approversDisplayList6}>
                                    <lightning-datatable 
                                                        data={approversDisplayList6} 
                                                        columns={cols5} 
                                                        key-field="Id"
                                                        hide-checkbox-column="true" 
                                                        show-row-number-column
                                                        min-column-width="150"
                                                        wrap-text-max-lines="10">
                                    </lightning-datatable>
                                    <div class="slds-align_absolute-center">
                                        <lightning-button class="slds-m-top_small"
                                            label="Download Safeguarding Training Table(CS5) - CSV"
                                            onclick={handleTrainingGenerator}>
                                        </lightning-button>
                                    </div>
                                </template>
                            </div>
                        </lightning-accordion-section>

                        <lightning-accordion-section name="Partner Table (CS8)" label="Partner Table (CS8)"
                            onclick={getPartEvd}>
                            <div class="table-alignment slds-table_striped slds-table_col-bordered  slds-is-relative slds-no-row-hover slds-cell-wrap slds-table_resizable-cols">
                                <template if:true={approversDisplayList4}>
                                    <lightning-datatable 
                                                        data={approversDisplayList4} 
                                                        columns={cols3} 
                                                        key-field="Id"
                                                        hide-checkbox-column="true" 
                                                        show-row-number-column
                                                        >
                                    </lightning-datatable>
                                    <div class="slds-align_absolute-center">
                                        <lightning-button class="slds-m-top_small"
                                            label="Download Partner Table(CS8) - CSV" onclick={handlePartnerGenerator}>
                                        </lightning-button>
                                    </div>
                                </template>
                            </div>
                        </lightning-accordion-section>

                        <lightning-accordion-section name="Projects Risk Assessments Table (CS9)"
                            label="Projects Risk Assessments Table (CS9)" onclick={getProjEvd}>
                            <div class="table-alignment slds-table_striped slds-table_col-bordered  slds-is-relative slds-no-row-hover slds-cell-wrap slds-table_resizable-cols">
                                <template if:true={approversDisplayList5}>
                                    <lightning-datatable 
                                                        data={approversDisplayList5} 
                                                        columns={cols4} 
                                                        key-field="Id"
                                                        hide-checkbox-column="true" 
                                                        show-row-number-column>
                                    </lightning-datatable>
                                    <div class="slds-align_absolute-center">
                                        <lightning-button class="slds-m-top_small"
                                            label="Download Project Risk Assessments Table(CS9) - CSV"
                                            onclick={handleProjectGenerator}>
                                        </lightning-button>
                                    </div>
                                </template>
                            </div>
                        </lightning-accordion-section>

                        <lightning-accordion-section name="Summary" label="Summary" onclick={getSum}>
                            <div class="table-alignment slds-table_striped slds-table_col-bordered  slds-is-relative slds-no-row-hover slds-cell-wrap slds-table_resizable-cols">
                                <template if:true={approversDisplayList7}>
                                    <lightning-datatable 
                                                        data={approversDisplayList7} 
                                                        columns={cols6} 
                                                        key-field="Id"
                                                        hide-checkbox-column="true" 
                                                        >
                                    </lightning-datatable>
                                    <div class="slds-align_absolute-center">
                                        <lightning-button class="slds-m-top_small" label="Download Summary - CSV"
                                            onclick={handleSummaryGenerator}>
                                        </lightning-button>
                                    </div>
                                </template>
                            </div>
                        </lightning-accordion-section>
                       
                        <lightning-accordion-section name="Evidence" label="Evidence" onclick={getAttachment}>
                            <div class="table-alignment slds-table_striped slds-table_col-bordered  slds-is-relative slds-no-row-hover slds-cell-wrap slds-table_resizable-cols">
    
                                <c-all-evidences submission-id={onlineSubmissionId}></c-all-evidences>
                        
                            </div>
                        </lightning-accordion-section> 

</template>
<div class="slds-align_absolute-center slds-m-around_medium">
    <lightning-button-group>
        <lightning-button class="slds-m-left_x-small" label="Generate Pdf"
            onclick={PDFGeneratorHandler}></lightning-button>
    </lightning-button-group>
</div>
</template>
</lightning-accordion>
</lightning-card>
</div>
</template>