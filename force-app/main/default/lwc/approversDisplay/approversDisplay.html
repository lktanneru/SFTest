<template>
    <lightning-card title="Submission Data To Be Approved">
        <c-spinner is-loading ={isLoading}></c-spinner>
        <c-offline-banner></c-offline-banner>
        <lightning-accordion allow-multiple-sections-open active-section-name={activeSections}>
            
                
                <lightning-accordion-section name="SafeguardingFocalPoint" label="Safeguarding Focal Points"
                    onclick={getFocalPoint}>
                    <div class="table-alignment slds-table_striped slds-table_col-bordered  slds-is-relative slds-no-row-hover slds-cell-wrap slds-table_resizable-cols">
                        <lightning-datatable 
                                            data={approversDisplayList2}
                                            columns={cols2}     
                                            key-field="Id" 
                                            hide-checkbox-column="true"
                                            show-row-number-column
                                            >
                        </lightning-datatable>
                    </div>
                </lightning-accordion-section>

                <lightning-accordion-section name="InformationProviders" label="Information Providers"
                    onclick={getInfoProv}>
                        <div class="table-alignment slds-table_striped slds-table_col-bordered  slds-is-relative slds-no-row-hover slds-cell-wrap slds-table_resizable-cols">
                            <template if:true={approversDisplayList3}>
                                <lightning-datatable 
                                                    data={approversDisplayList3} 
                                                    columns={cols3} 
                                                    key-field="Id"
                                                    hide-checkbox-column="true" 
                                                    show-row-number-column>
                                </lightning-datatable>
                            </template>
                        </div>
                </lightning-accordion-section>

                <lightning-accordion-section name="Tasks" label="Tasks" onclick={getTask}>
                    <div style="height: auto; width: 50rem;" class=" table-alignment slds-table_striped slds-table_col-bordered  slds-is-relative slds-no-row-hover slds-cell-wrap slds-table_resizable-cols">
                        <template if:true={approversDisplayList}>
                            <lightning-datatable 
                                                data={approversDisplayList} 
                                                columns={cols} 
                                                key-field="Id"
                                                sorted-by={sortBy} 
                                                sorted-direction={sortDirection} 
                                                onsort={doSorting}
                                                hide-checkbox-column="true" 
                                                show-row-number-column 
                                                min-column-width="80"
                                                wrap-text-max-lines="40">
                            </lightning-datatable>
                        </template>
                    </div>
                </lightning-accordion-section>

                <template if:true={isImplPlan}>
                    <lightning-accordion-section name="QuestionsAnswers" label="Questions and Answers">
                        <div class="table-alignment slds-table_striped slds-table_col-bordered  slds-is-relative slds-no-row-hover slds-cell-wrap slds-table_resizable-cols">
                            <lightning-tabset>
                                <template for:each={coreStandards} for:item="coreStandard">
                                    <lightning-tab key={coreStandard.value} label={coreStandard.label} value={coreStandard.value} onactive={getQnA} min-column-width="230">
                                        <lightning-datatable 
                                                            data={approversDisplayList1} 
                                                            columns={columns}
                                                            key-field="QuestionNumber" 
                                                            hide-checkbox-column="true" 
                                                            wrap-text-max-lines="40">
                                        </lightning-datatable>
                                    </lightning-tab>
                                </template>
                            </lightning-tabset>
                        </div>
                    </lightning-accordion-section>

                    <lightning-accordion-section name="TrainingTable" label="Safeguarding Training Table (CS5)"
                        onclick={getTraining}>
                        <div style="height: auto; width: 50rem;" class="slds-table table-alignment slds-table_striped slds-table_col-bordered  slds-is-relative slds-no-row-hover slds-cell-wrap slds-table_resizable-cols">
                            <template if:true={approversDisplayList4}>
                                <lightning-datatable
                                                    data={approversDisplayList4} 
                                                    columns={cols5} 
                                                    key-field="Id"
                                                    hide-checkbox-column="true" 
                                                    show-row-number-column
                                                    min-column-width="150"
                                                    wrap-text-max-lines="40">
                                </lightning-datatable>
                            </template>
                        </div>
                    </lightning-accordion-section>


                    <lightning-accordion-section name="PartnerTable" label="Partner Table (CS8)" onclick={getPartner}>
                        <div style="height: auto; width: 50rem;" class="table-alignment slds-table_striped slds-table_col-bordered  slds-is-relative slds-no-row-hover slds-cell-wrap slds-table_resizable-cols">
                            <template if:true={approversDisplayList5}>
                                <lightning-datatable 
                                                    data={approversDisplayList5} 
                                                    columns={cols6} key-field="Id"
                                                    sorted-by={sortBy} 
                                                    sorted-direction={sortDirection} 
                                                    onsort={doSorting}
                                                    hide-checkbox-column="true" 
                                                    show-row-number-column>
                                </lightning-datatable>
                            </template>
                        </div>
                    </lightning-accordion-section>

                    <lightning-accordion-section name="ProjectTable" label="Projects Risk Assessments Table (CS9)"
                        onclick={getProject}>
                        <div style="height: auto; width: 50rem;" class="table-alignment slds-table_striped slds-table_col-bordered  slds-is-relative slds-no-row-hover slds-cell-wrap slds-table_resizable-cols">
                            <template if:true={approversDisplayList6}>
                                <lightning-datatable 
                                                    data={approversDisplayList6} 
                                                    columns={cols4} 
                                                    key-field="Id"
                                                    sorted-by={sortBy} 
                                                    sorted-direction={sortDirection} 
                                                    onsort={doSorting}
                                                    hide-checkbox-column="true" 
                                                    show-row-number-column>
                                </lightning-datatable>
                            </template>
                        </div>
                    </lightning-accordion-section>

                    <lightning-accordion-section name="Summary" label="Summary" onclick={getSummary}>
                        <div class="table-alignment slds-table_striped slds-table_col-bordered  slds-is-relative slds-no-row-hover slds-cell-wrap slds-table_resizable-cols">
                            <template if:true={approversDisplayList7}>
                                <lightning-datatable 
                                                    data={approversDisplayList7}    
                                                    columns={cols7} 
                                                    key-field="Id"
                                                    sorted-by={sortBy} 
                                                    sorted-direction={sortDirection} 
                                                    onsort={doSorting}
                                                    hide-checkbox-column="true" 
                                                    min-column-width="150">
                                </lightning-datatable>
                            </template>
                        </div>
                    </lightning-accordion-section>
                 
                    <lightning-accordion-section name="Evidence" label="Evidence" onclick={getAttachment}>
                        <div class="table-alignment slds-table_striped slds-table_col-bordered  slds-is-relative slds-no-row-hover slds-cell-wrap slds-table_resizable-cols">

                            <c-all-evidences submission-id={submissionId}></c-all-evidences>
                    
                        </div>
                    </lightning-accordion-section>
                </template>
        </lightning-accordion>
    </lightning-card>
</template>